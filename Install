https://www.youtube.com/watch?v=mQW3u0bm3VE
https://phoenixnap.com/kb/kubernetes-mongodb

https://www.youtube.com/watch?v=YLpoKs_e0kA

https://medium.com/@shubhamdhote9717/mongodb-deployment-on-kubernetes-cluster-via-deploymentset-and-statefulset-6ca649894ca7


sudo vi /etc/selinux/config
SELINUX=disabled

# set your hostname
sudo hostnamectl set-hostname master
sudo reboot

sudo sestatus


# Install Docker


# Update the package index
sudo dnf check-update

# Install Docker
sudo dnf install -y docker

# Start and enable Docker service
sudo systemctl start docker
sudo systemctl enable docker

# Verify Docker installation
sudo systemctl status docker



https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/
# Set SELinux in permissive mode (effectively disabling it)
sudo setenforce 0
sudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config


# This overwrites any existing configuration in /etc/yum.repos.d/kubernetes.repo
cat <<EOF | sudo tee /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes
baseurl=https://pkgs.k8s.io/core:/stable:/v1.29/rpm/
enabled=1
gpgcheck=1
gpgkey=https://pkgs.k8s.io/core:/stable:/v1.29/rpm/repodata/repomd.xml.key
exclude=kubelet kubeadm kubectl cri-tools kubernetes-cni
EOF

# Install kubelet, kubeadm and kubectl:

sudo yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes
# sudo yum remove kubelet kubeadm kubectl
(Optional) Enable the kubelet service before running kubeadm:

sudo systemctl enable kubelet
sudo free -m
sudo systemctl restart kubelet

[root@k8s-dev ~]# cat /etc/systemd/system/kubelet.service.d/containerd.conf 
[Service]
Environment="KUBELET_EXTRA_ARGS=--runtime-request-timeout=15m --image-service-endpoint=unix:///run/containerd/containerd.sock  --cgroup-driver=systemd"

sudo systemctl status docker
sudo systemctl status kubelet


# Run it only in master Node
kubeadm init 

# Install Calico with Kubernetes API datastore, 50 nodes or less
# Download the Calico networking manifest for the Kubernetes API datastore.

curl https://raw.githubusercontent.com/projectcalico/calico/v3.27.3/manifests/calico.yaml -O

kubectl apply -f calico.yaml


